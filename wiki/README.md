# Vaultly 项目维基

> 跨平台密码与敏感信息管理器 - 项目知识库
>
> **文档版本**: v2.2.0  
> **更新日期**: 2026-02-21  
> **文档体系**: 渐进式文档（project-wiki）

---

## 版本历史

| 版本 | 日期 | 变更内容 |
|------|------|----------|
| v1.0 | 2026-02-15 | 初始版本，基础文档结构 |
| v2.0 | 2026-02-20 | 引入渐进式文档体系，新增功能/需求/架构文档 |
| v2.1 | 2026-02-20 | 完善核心文档，补充代码实践亮点、数据流动设计、代码实现映射 |
| v2.2 | 2026-02-21 | 移除生物识别功能，统一文档版本规范 |

---

## 📚 文档体系

本项目采用 **渐进式文档体系**，从功能描述到架构设计形成完整文档链：

```
功能文档（功能描述）
    ↓ 自动推断
需求文档（数据模型、数据流动、状态管理）
    ↓ 设计决策
架构文档（多角色视图、多维度设计）
```

### 新增文档结构

| 目录 | 说明 | 文档数量 |
|------|------|---------|
| **功能文档/** | 功能需求、用户场景、验收标准 | 3+ |
| **需求文档/** | 数据模型、数据流动、状态管理、接口设计 | 3+ |
| **架构文档/** | 多角色视图、技术选型、实现方案 | 2+ |
| **数据流动/** | 数据流转时序图、流程说明 | 1+ |
| **状态机/** | 状态转换设计、事件定义 | 2+ |
| **角色视图/** | 5种角色专属指南 | 2+ |

---

## 📂 完整文档目录

### 📋 项目概览
- [项目简介](./01-项目概览/项目简介.md) - 项目背景、核心目标、功能特性
- [技术栈](./01-项目概览/技术栈.md) - 完整技术选型清单

### 🏗 架构设计
- [整体架构](./02-架构设计/整体架构.md) - 系统分层架构图
- [安全架构](./02-架构设计/安全架构.md) - 加密设计、安全特性
- [同步架构](./02-架构设计/同步架构.md) - WebDAV 同步设计
- [插件架构](./02-架构设计/插件架构.md) - WXT 浏览器插件设计

### 📦 模块设计
- [认证模块](./03-模块设计/认证模块.md) - 主密码
- [保险库模块](./03-模块设计/保险库模块.md) - 条目管理、数据存储
- [TOTP 模块](./03-模块设计/TOTP模块.md) - 双因素认证
- [同步模块](./03-模块设计/同步模块.md) - WebDAV 同步

### 💾 数据模型
- [数据字典](./04-数据模型/数据字典.md) - 核心数据结构定义
- [加密结构](./04-数据模型/加密结构.md) - 加密数据格式

### 🔌 API 接口
- [接口概览](./05-API接口/接口概览.md) - 服务接口清单
- [认证接口](./05-API接口/认证接口.md) - 登录、解锁接口
- [保险库接口](./05-API接口/保险库接口.md) - 条目 CRUD 接口
- [同步接口](./05-API接口/同步接口.md) - 同步操作接口

### 📅 开发计划
- [版本规划](./06-开发计划/版本规划.md) - 开发路线图
- [任务清单](./06-开发计划/任务清单.md) - 详细开发任务

### ✅ 检查清单
- [安全检查清单](./07-检查清单/安全检查清单.md) - 安全设计检查项
- [性能检查清单](./07-检查清单/性能检查清单.md) - 性能要求检查项

---

## 🆕 新增渐进式文档

### 功能文档
- [用户认证功能](./功能文档/用户认证功能.md) - 认证功能需求与场景
- [保险库管理功能](./功能文档/保险库管理功能.md) - 保险库功能需求
- [WebDAV 同步功能](./功能文档/WebDAV同步功能.md) - 同步功能需求

### 需求文档
- [用户认证需求](./需求文档/用户认证需求.md) - 认证数据模型与数据流
- [保险库管理需求](./需求文档/保险库管理需求.md) - 保险库数据模型与数据流
- [WebDAV 同步需求](./需求文档/WebDAV同步需求.md) - 同步数据模型与数据流

### 架构文档
- [用户认证架构](./架构文档/用户认证架构.md) - 认证模块多角色视图

### 数据流动
- [用户登录数据流](./数据流动/用户登录数据流.md) - 登录流程数据流转

### 状态机
- [认证状态机](./状态机/认证状态机.md) - 认证状态转换设计
- [同步状态机](./状态机/同步状态机.md) - 同步状态转换设计

### 角色视图
- [架构师视图](./角色视图/架构师视图.md) - 技术选型与架构设计
- [开发工程师视图](./角色视图/开发工程师视图.md) - 模块接口与实现指南

---

## 🚀 快速导航

### 按角色导航

| 角色 | 推荐文档 |
|------|---------|
| **架构师** | [架构师视图](./角色视图/架构师视图.md)、[整体架构](./02-架构设计/整体架构.md) |
| **开发工程师** | [开发工程师视图](./角色视图/开发工程师视图.md)、[用户认证需求](./需求文档/用户认证需求.md) |
| **测试工程师** | [认证状态机](./状态机/认证状态机.md)、[用户登录数据流](./数据流动/用户登录数据流.md) |
| **产品经理** | [用户认证功能](./功能文档/用户认证功能.md)、[保险库管理功能](./功能文档/保险库管理功能.md) |

### 按功能导航

| 功能 | 功能文档 | 需求文档 | 架构文档 |
|------|---------|---------|---------|
| 用户认证 | [功能](./功能文档/用户认证功能.md) | [需求](./需求文档/用户认证需求.md) | [架构](./架构文档/用户认证架构.md) |
| 保险库管理 | [功能](./功能文档/保险库管理功能.md) | [需求](./需求文档/保险库管理需求.md) | - |
| WebDAV 同步 | [功能](./功能文档/WebDAV同步功能.md) | [需求](./需求文档/WebDAV同步需求.md) | - |

---

## 📊 项目信息

| 项目 | 信息 |
|------|------|
| **项目名称** | Vaultly |
| **类型** | 跨平台密码管理器 |
| **框架** | Flutter 3.27+ |
| **状态** | 规划中 |
| **目标平台** | iOS、Android、Desktop、Web + Browser Extension |
| **文档体系** | 渐进式文档（project-wiki）|

---

## 🔗 相关链接

- [架构设计文档](./02-架构设计/整体架构.md)
- [数据模型定义](./04-数据模型/数据字典.md)
- [开发计划](./06-开发计划/版本规划.md)
- [架构师视图](./角色视图/架构师视图.md)
- [开发工程师视图](./角色视图/开发工程师视图.md)

---

## 💡 代码实践亮点

### 安全实践

| 实践 | 实现 | 代码位置 |
|------|------|----------|
| **安全内存清除** | `secureClear()` 方法覆写敏感数据 | `lib/core/crypto/services/crypto_service.dart` |
| **Argon2id 密钥派生** | memory=64MB, iterations=3, parallelism=4 | `lib/core/crypto/services/crypto_service.dart` |
| **字段级加密** | 敏感字段单独加密存储 | `lib/core/services/vault_service.dart` |
| **路由守卫** | 基于认证状态的重定向 | `lib/core/routes/app_router.dart` |

### 架构实践

| 实践 | 实现 | 代码位置 |
|------|------|----------|
| **强类型状态管理** | 不可变状态类 + copyWith | `lib/core/providers/auth_provider.dart` |
| **Repository 模式** | 抽象数据访问层 | `lib/core/repositories/` |
| **依赖注入** | Riverpod Provider | `lib/core/providers/` |
| **模型继承体系** | VaultEntry 抽象基类 | `lib/core/models/vault_entry.dart` |

---

## 📝 文档规范

### 图表规范
- 使用 Mermaid 语法绘制图表
- 时序图展示数据流动
- 状态图展示状态转换
- 流程图展示业务流程

### 文档模板
- 功能文档：功能描述 → 用户场景 → 需求清单 → 验收标准
- 需求文档：数据模型 → 数据流动 → 状态管理 → 接口设计
- 架构文档：多角色视图 → 技术选型 → 实现方案

### 文档版本规范
- 所有核心文档包含版本历史表格
- 版本号遵循语义化版本规范（MAJOR.MINOR.PATCH）
- 每次更新必须记录变更内容

---

## 🔄 变更记录

| 版本 | 日期 | 变更内容 | 作者 |
|------|------|---------|------|
| v2.2 | 2026-02-21 | 移除生物识别功能，统一文档版本规范 | Vaultly Team |
| v2.1 | 2026-02-20 | 完善核心文档，补充代码实践亮点 | Vaultly Team |
| v2.0 | 2026-02-20 | 引入渐进式文档体系，新增功能/需求/架构文档 | Vaultly Team |
| v1.0 | 2026-02-15 | 初始版本，基础文档结构 | Vaultly Team |
