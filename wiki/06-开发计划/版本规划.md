# 版本规划

> **版本**: v2.2.0  
> **更新日期**: 2026-02-22  
> **作者**: Vaultly Team  
> **文档类型**: 计划文档

---

## 版本历史

| 版本 | 日期 | 修改内容 | 作者 |
|------|------|----------|------|
| v1.0.0 | 2026-02-20 | 初始版本 | Vaultly Team |
| v2.0.0 | 2026-02-22 | 与代码实际进展同步，更新版本规划 | Vaultly Team |
| v2.2.0 | 2026-02-22 | 同步新增实现：Folder 模型、Password Policy、Repository 层 | Vaultly Team |

---

## 一、版本概览

### 1.1 当前版本信息

| 项目 | 信息 |
|------|------|
| **当前版本** | v2.1.2+1 |
| **代码分支** | main |
| **Flutter SDK** | ^3.10.8 |
| **状态** | 🚧 开发中 |

### 1.2 版本路线图

| 阶段 | 版本 | 时间 | 目标 | 状态 |
|------|------|------|------|------|
| **Phase 1** | v0.1.0 - v0.9.x | 已完成 | MVP - 基础密码管理 | ✅ 已完成 |
| **Phase 2** | v1.0.0 - v1.9.x | 已完成 | 增强功能 | ✅ 已完成 |
| **Phase 3** | v2.0.0+ | 进行中 | 优化与扩展 | 🚧 开发中 |
| **Phase 4** | v3.0.0 | 规划中 | 正式发布 | 📋 规划 |

---

## 二、Phase 1: MVP (已完成 ✅)

### 2.1 目标

快速验证核心功能，完成最小可行产品。

**状态**: ✅ 已完成 (代码版本 v0.x)

### 2.2 交付物

- ✅ Flutter 基础框架
- ✅ 主密码设置/验证
- ✅ 登录凭证管理（CRUD）
- ✅ 密码生成器
- ✅ 基础搜索
- ✅ 手动 WebDAV 同步
- ✅ TOTP 显示

### 2.3 实际完成情况

| 任务 | 状态 | 代码文件 |
|------|------|---------|
| Flutter 项目初始化 | ✅ | `main.dart`, `pubspec.yaml` |
| Riverpod 状态管理 | ✅ | `auth_provider.dart`, `webdav_provider.dart` |
| 项目结构组织 | ✅ | `lib/core/`, `lib/ui/` |
| AES-256-GCM 加密 | ✅ | `crypto_service.dart` |
| Argon2id 密钥派生 | ✅ | `crypto_service.dart` |
| 主密码设置/验证 | ✅ | `auth_service.dart`, `setup_password_page.dart`, `unlock_page.dart` |
| 保险库主界面 | ✅ | `vault_page.dart` |
| 条目 CRUD | ✅ | `add_entry_page.dart`, `entry_detail_page.dart` |
| 密码生成器 | ✅ | `password_generator.dart`, `password_generator_dialog.dart` |
| WebDAV 同步 | ✅ | `webdav_service.dart`, `webdav_config_page.dart`, `webdav_sync_page.dart` |
| TOTP 生成 | ✅ | `totp_service.dart`, `qr_scanner_page.dart` |

### 2.4 技术实现细节

**存储方案** (与文档差异):
- 实际使用: `flutter_secure_storage` + JSON 文件存储
- 文档规划: Isar 数据库
- 原因: 简化实现，减少依赖

**同步实现**:
- 完整 WebDAV 客户端集成
- 支持上传/下载/配置管理
- 内存缓存优化性能

---

## 三、Phase 2: 增强功能 (已完成 ✅)

### 3.1 目标

完善功能集，增加更多条目类型和安全性功能。

**状态**: ✅ 已完成 (代码版本 v1.x)

### 3.2 交付物

- ✅ 银行卡条目类型 (VaultEntry 模型支持)
- ✅ 安全笔记（Markdown）(VaultEntry 模型支持)
- ✅ 身份信息条目 (VaultEntry 模型支持)
- ✅ 自动锁定功能 (`auto_lock_service.dart`)
- ⚠️ Android Autofill (部分实现)
- ⚠️ iOS AutoFill Extension (规划中)
- ⚠️ WXT 插件基础功能 (规划中)

### 3.3 实际完成情况

| 任务 | 状态 | 代码文件 | 说明 |
|------|------|---------|------|
| 多类型条目支持 | ✅ | `vault_entry.dart` | 支持 login/bankCard/secureNote/identity/custom |
| 自动锁定 | ✅ | `auto_lock_service.dart` | 已实现 inactivity 检测 |
| 剪贴板保护 | ✅ | `clipboard_service.dart` | 自动清除敏感数据 |
| Android Autofill | ⚠️ | - | 待实现 |
| iOS AutoFill | 📋 | - | 规划中 |
| WXT 浏览器插件 | 📋 | - | 规划中 |

---

## 四、Phase 3: 优化与扩展 (🚧 进行中)

### 4.1 目标

优化现有功能，扩展平台支持。

**状态**: 🚧 进行中 (代码版本 v2.x)

### 4.2 当前版本 (v2.1.2+1)

| 功能 | 状态 | 说明 |
|------|------|------|
| 基础同步 | ✅ | 完整上传/下载功能 |
| 多语言支持 | ✅ | 中文/英文国际化框架已集成 |
| 内存缓存优化 | ✅ | WebDAV 配置缓存 |
| 文件夹管理 | ✅ | Folder 模型，支持层级结构 |
| 密码策略 | ✅ | PasswordPolicy，强度计算/验证 |
| 数据仓库层 | ✅ | VaultRepository + LocalStorageRepository |
| 增量同步 | 📋 | 规划中 |
| 冲突解决 UI | 📋 | 规划中 |
| 密码健康检查 | 📋 | 规划中 |
| 数据导入/导出 | 📋 | 规划中 |

### 4.3 进行中任务

| 任务 ID | 任务 | 优先级 | 状态 |
|---------|------|--------|------|
| V3-001 | 增量同步实现 | P0 | 📋 |
| V3-002 | 冲突检测与解决 UI | P0 | 📋 |
| V3-003 | 密码健康检查 | P1 | 📋 |
| V3-004 | 1Password/Bitwarden 导入 | P1 | 📋 |
| V3-005 | CSV 导出 | P1 | 📋 |
| V3-006 | 性能优化 | P1 | 🚧 |
| V3-007 | 桌面端支持 | P2 | 📋 |
| V3-008 | Web 端支持 | P2 | 📋 |

---

## 五、Phase 4: 正式发布 (📋 规划中)

### 5.1 目标

正式发布到各应用商店。

### 5.2 发布计划

| 平台 | 状态 | 预计时间 |
|------|------|---------|
| App Store (iOS) | 📋 | Phase 4 |
| Google Play (Android) | 📋 | Phase 4 |
| Desktop (Win/Mac/Linux) | 📋 | Phase 4 |
| Web | 📋 | Phase 4 |

---

## 五、里程碑检查点

### 5.1 Phase 1 检查点

| 周 | 检查点 | 交付物 |
|----|--------|--------|
| Week 2 | 基础框架完成 | 可运行的基础 App |
| Week 4 | 加密模块完成 | 加密/解密功能 |
| Week 6 | 登录功能完成 | 完整登录流程 |
| Week 8 | 条目管理完成 | CRUD 功能 |
| Week 10 | MVP 完成 | 可用的密码管理器 |

### 5.2 Phase 2 检查点

| 月 | 检查点 | 交付物 |
|----|--------|--------|
| Month 3 | 银行卡/笔记完成 | 多种条目类型 |
| Month 4 | 安全功能完成 | 自动锁定 |
| Month 5 | 插件完成 | 浏览器扩展 |

### 5.3 Phase 3 检查点

| 月 | 检查点 | 交付物 |
|----|--------|--------|
| Month 6 | 功能完善 | 完整功能集 |
| Month 6 | 发布 | 正式版本 |

---

## 六、相关文档

- [任务清单](./任务清单.md) - 详细任务列表
- [整体架构](../02-架构设计/整体架构.md) - 系统架构
- [项目简介](../01-项目概览/项目简介.md) - 项目背景
